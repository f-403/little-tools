è¦**è·å–å½“å‰è®¡ç®—æœºç”¨æˆ·åï¼ˆç™»å½•ç”¨æˆ·ï¼‰**ï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š

---

## âœ… `GetUserNameW` â€” è·å–å½“å‰ç™»å½•ç”¨æˆ·åç§°

è¿™æ˜¯ä½ å·²ç»ä½¿ç”¨è¿‡çš„å‡½æ•°ï¼Œå®ƒè¿”å›å½“å‰è¿è¡Œç¨‹åºæ‰€å±ç”¨æˆ·çš„ç™»å½•åï¼ˆå¦‚ `Administrator`, `who`, `user1` ç­‰ï¼‰ï¼š

### ğŸ”§ ç¤ºä¾‹ï¼š

```cpp
#include <windows.h>
#include <iostream>

void GetUsername() {
    wchar_t username[256];
    DWORD size = 256;

    if (GetUserNameW(username, &size)) {
        std::wcout << L"[+] å½“å‰ç”¨æˆ·å: " << username << std::endl;
    } else {
        std::wcerr << L"[-] è·å–ç”¨æˆ·åå¤±è´¥ï¼" << std::endl;
    }
}
```

---

## âœ… å¦‚æœä½ è¿˜æƒ³è·å–è®¡ç®—æœºåï¼ˆè®¾å¤‡åï¼‰

ç”¨ `GetComputerNameW`ï¼š

```cpp
void GetComputerNameInfo() {
    wchar_t computerName[256];
    DWORD size = 256;

    if (GetComputerNameW(computerName, &size)) {
        std::wcout << L"[+] è®¡ç®—æœºå: " << computerName << std::endl;
    } else {
        std::wcerr << L"[-] è·å–è®¡ç®—æœºåå¤±è´¥ï¼" << std::endl;
    }
}
```

---

## âœ… æƒ³è·å–æ›´å®Œæ•´çš„æ ¼å¼ï¼š`åŸŸå\\ç”¨æˆ·å`ï¼ˆå¦‚ `WORKGROUP\\who`ï¼‰

ä½¿ç”¨ `GetUserNameExW`ï¼ˆéœ€è¦ `secur32.lib`ï¼‰

```cpp
#include <secext.h> // æ³¨æ„å¤´æ–‡ä»¶
#pragma comment(lib, "secur32.lib")

void GetFullUsername() {
    wchar_t user[256];
    ULONG size = 256;
    if (GetUserNameExW(NameSamCompatible, user, &size)) {
        std::wcout << L"[+] å®Œæ•´ç”¨æˆ·å: " << user << std::endl;
    } else {
        std::wcerr << L"[-] è·å–å®Œæ•´ç”¨æˆ·åå¤±è´¥" << std::endl;
    }
}
```

---

## âœ… æ±‡æ€»ç»“æœï¼š

| å‡½æ•° | è·å–å†…å®¹ | ç¤ºä¾‹ç»“æœ |
|------|----------|----------|
| `GetUserNameW` | å½“å‰ç”¨æˆ·å | `who` |
| `GetComputerNameW` | ä¸»æœºå / è®¡ç®—æœºå | `LAPTOP-2023` |
| `GetUserNameExW` | åŸŸå + ç”¨æˆ·å | `WORKGROUP\\who` |

---



```cpp
GetUsername();            // ç”¨æˆ·å
GetComputerNameInfo();    // ä¸»æœºå
GetFullUsername();        // åŸŸ\ç”¨æˆ·åï¼ˆæ›´å®Œæ•´ï¼‰
```

# åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·
```cpp
#include <windows.h>
#include <lm.h>
#include <iostream>
#pragma comment(lib, "netapi32.lib")

void EnumLocalUsers() {
    LPUSER_INFO_0 pBuf = NULL;
    DWORD entriesRead = 0, totalEntries = 0, resumeHandle = 0;

    NET_API_STATUS nStatus = NetUserEnum(
        NULL,               // æœ¬åœ°è®¡ç®—æœº
        0,                  // è¿”å› USER_INFO_0ï¼ˆåªå«ç”¨æˆ·åï¼‰
        FILTER_NORMAL_ACCOUNT, // åªåˆ—å‡ºæ™®é€šè´¦æˆ·
        (LPBYTE*)&pBuf,
        MAX_PREFERRED_LENGTH,
        &entriesRead,
        &totalEntries,
        &resumeHandle
    );

    if ((nStatus == NERR_Success || nStatus == ERROR_MORE_DATA) && pBuf != NULL) {
        std::wcout << L"[+] æœ¬åœ°ç”¨æˆ·åˆ—è¡¨:" << std::endl;
        for (DWORD i = 0; i < entriesRead; i++) {
            std::wcout << L"    - " << pBuf[i].usri0_name << std::endl;
        }
        NetApiBufferFree(pBuf);
    } else {
        std::wcerr << L"[-] è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥ï¼Œé”™è¯¯ç : " << nStatus << std::endl;
    }
}

```